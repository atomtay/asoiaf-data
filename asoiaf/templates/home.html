{% load staticfiles %}
<html>
    <head>
        <title>A Data Analysis of Thrones</title>
        <!--[if lte IE 8]>
            <script src="{% static 'js/excanvas.js' %}"></script>
        <![endif]-->
    </head>
    <body>
        <h1>A Data Analysis of Thrones</h1>

        <canvas id="barchart" width="500" height="400" style="max-width: 500px;"></canvas>
        <canvas id="linechart" width="500" height="400" style="max-width: 500px;"></canvas>
        <canvas id="bargraph"></canvas>

        <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/Chart.js/2.1.2/Chart.min.js"></script>
        <script>
            fetch('{% url "overview_bar_chart_json" %}')
            .then(function(response) {
                return response.json();
            })
            .then(function(myJson) {
                console.log(JSON.stringify(myJson));
                const ctx = document.getElementById("barchart").getContext("2d")
                new Chart(ctx, {
                    type: 'bar', data: myJson
                });
            });

            fetch('{% url "chapter_line_chart_json" %}')
            .then(function(response) {
                return response.json();
            })
            .then(function(myJson) {
                console.log(JSON.stringify(myJson));
                const ctx = document.getElementById("linechart").getContext("2d")
                new Chart(ctx, {
                    type: 'line', data: myJson
                });
            });

            fetch('{% url "deaths_doughnut_graph_json" %}')
            .then(function(response) {
                return response.json();
            })
            .then(function(myJson) {
                console.log(JSON.stringify(myJson));
                const ctx = document.getElementById("doughnutgraph").getContext("2d")
                new Chart(ctx, {
                    type: 'doughnut', data: myJson
                });
            });          
        </script>
    </body>
</html>